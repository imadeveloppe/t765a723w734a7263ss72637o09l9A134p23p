<ion-view title="Absence/Retard" id="absence" style="">
   
  <ion-content padding="false" class="has-header"> 

      <form id="sendAbsence">
        <div class="list">

          <label class="item item-input item-select">
            <div class="input-label">
              Matière
            </div>
            <select name="matiere" ng-model="data.matiere" ng-options="matiere.id as matiere.intitule for matiere in data.matieres track by matiere.id">
              <option value="">Choisir</option> 
            </select>
          </label>

          <label class="item item-input item-select">
            <div class="input-label">
              Classe
            </div>
            <select ng-model="data.selectclasse" ng-change="changeClasse()" ng-options="key as destination.classe for (key, destination) in data.destination track by key"> 
              <option value="">Choisir</option> 
            </select>
            <input type="hidden" name="classe" value="{{ data.classe }}">
          </label> 

          <label class="item item-input item-select">
            <div class="input-label">
              Groupe
            </div>
            <select ng-model="data.selectgroupe" ng-change="changeGroupe()" ng-options="key as groupe.groupe for (key, groupe) in data.groupes track by key">  
              <option value="">Choisir</option> 
            </select>
            <input type="hidden" name="groupe" value="{{ data.groupe }}">
          </label>

          <div ion-datetime-picker date monday-first ng-model="data.date" only-valid="{'after': 'today', 'inclusive': true}" sub-title="Date" class="item item-icon-right ng-pristine ng-untouched ng-valid"  style="padding: 14px 14px;">
                <i class="icon ion-ios-calendar positive" style="color: rgb(17, 193, 243);"></i>
                Date 
                <a href="#" class="noClick" style="color: #000!important;text-decoration: none!important;float: right;padding-right: 33px;">{{data.date| date: "dd/MM/yyyy"}}</a>
            </div>
            <input type="hidden" name="date" value="{{data.date| date: 'dd/MM/yyyy'}}">

          <div ion-datetime-picker time ng-model="data.time" only-valid="{'initial': true}" sub-title="Heure" class="item item-icon-right ng-pristine ng-untouched ng-valid"  style="padding: 14px 14px;">
                <i class="icon ion-ios-calendar positive" style="color: rgb(17, 193, 243);"></i>
                Heure 
                <a href="#" class="noClick" style="color: #000!important;text-decoration: none!important;float: right;padding-right: 33px;">{{data.time| date: "H:m"}}</a>
            </div>
            <input type="hidden" name="time" value="{{data.time| date: 'H:m'}}">

        </div>
 
      <div ng-if="hasEleves">
        <table class="listEleves" ng-if="data.eleves.length > 0">
          <thead>
            <tr>
            <th>Nom &amp; prénom</th>
            <th>Absence</th>
            <th>Retard</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="eleve in data.eleves">
            <td>{{ eleve.nom }}</td>
            <td class="tdAbsence" style="width: 61px;" class="check"><input type="checkbox" data-value="{{ eleve.dataId }}" ng-click="toggleSelection('abs', eleve.dataId)"></td>
            <td class="tdRetard" style="width: 61px;" class="check"><input type="checkbox" data-value="{{ eleve.dataId }}" ng-click="toggleSelection('rtd', eleve.dataId)"></td>
          </tr>
        </tbody>
      </table>
    </div>

      <div style="text-align: right;" class="padding" ng-if="data.eleves.length > 0">
        <button ng-click="sendAbsence()" class="button button-positive button  icon-right ion-android-send">
           Envoyer
        </button>
      </div>

    </form>

  </ion-content> 

</ion-view>

